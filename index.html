<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScriptAndScale AI - Premium AI Automation Agents</title>
  <!-- Your existing head content, fonts, etc. -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* Paste your full existing CSS here - unchanged */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#0f0f23,#1a1a3e);color:#fff;min-height:100vh}
    /* ... all your current styles ... */
  </style>
</head>
<body>
  <!-- Your full existing header/nav/hero/grid/features/bundles sections - unchanged -->
  <!-- ... paste everything up to the purchase section ... -->

  <!-- Updated Unified Purchase Section -->
  <section id="purchase" style="padding:80px 0;background:rgba(255,255,255,0.05)">
    <div class="container" style="max-width:800px;margin:0 auto;text-align:center">
      <h2 style="font-size:3rem;margin-bottom:2rem">Purchase Your AI Agent</h2>
      <p style="font-size:1.2rem;margin-bottom:3rem">Most delivered within 1 business day. Complex requests reviewed in 2-3 days.</p>
      <form id="purchaseForm">
        <select id="agentSelect" required style="width:100%;padding:1rem;margin-bottom:1rem;background:rgba(255,255,255,0.1);border:1px solid #667eea;color:#fff;border-radius:8px;font-size:1rem">
          <option value="">Select Agent or Bundle</option>
          <option value="Channel Optimization Agent|4997">Channel Optimization Agent - $4,997</option>
          <option value="Video Content Automation Agent|14997">Video Content Automation Agent - $14,997</option>
          <option value="Supercuts Agent|7997">Supercuts Agent - $7,997</option>
          <option value="Written Content Agent|9997">Written Content Agent - $9,997</option>
          <option value="Content Creator Bundle|19997">Content Creator Bundle - $19,997</option>
          <option value="Video Creator Bundle|24997">Video Creator Bundle - $24,997</option>
          <option value="Engagement Boost Add-On|6997">Engagement Boost Add-On - $6,997</option>
          <option value="Flagship Everything Bundle|44997">Flagship Everything Bundle - $44,997</option>
        </select>
        <input type="text" id="customerName" placeholder="Your Name" required style="width:100%;padding:1rem;margin-bottom:1rem;background:rgba(255,255,255,0.1);border:1px solid #667eea;color:#fff;border-radius:8px;font-size:1rem">
        <input type="email" id="customerEmail" placeholder="Your Email (for delivery)" required style="width:100%;padding:1rem;margin-bottom:1rem;background:rgba(255,255,255,0.1);border:1px solid #667eea;color:#fff;border-radius:8px;font-size:1rem">
        <textarea id="specialNotes" placeholder="Customization specs or special requests (keep standard for auto-processing)" rows="5" style="width:100%;padding:1rem;margin-bottom:1rem;background:rgba(255,255,255,0.1);border:1px solid #667eea;color:#fff;border-radius:8px;font-size:1rem"></textarea>
        <button type="submit" style="background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.2rem 3rem;border:none;border-radius:12px;font-size:1.5rem;font-weight:600;cursor:pointer">Submit & Proceed</button>
      </form>
      <div id="paypalContainer" style="display:none;margin-top:2rem"></div>
      <div id="statusMsg" style="margin-top:1rem;font-size:1.2rem"></div>
    </div>
  </section>

  <!-- Thank You Overlay (replaces separate page for simplicity) -->
  <div id="thankYouOverlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:1000;justify-content:center;align-items:center;text-align:center">
    <div style="max-width:600px;padding:3rem;background:#1a1a3e;border-radius:20px">
      <h1 style="font-size:3rem;margin-bottom:2rem">Payment Received!</h1>
      <p style="font-size:1.8rem">Thank you for your business. Your purchases will be emailed to the address you provided within 1 business day.</p>
      <button onclick="document.getElementById('thankYouOverlay').style.display='none'" style="margin-top:2rem;background:#667eea;color:#fff;padding:1rem 2rem;border:none;border-radius:8px;cursor:pointer">Close</button>
    </div>
  </div>

  <script>
    const prices = {
      'Channel Optimization Agent': 4997,
      'Video Content Automation Agent': 14997,
      'Supercuts Agent': 7997,
      'Written Content Agent': 9997,
      'Content Creator Bundle': 19997,
      'Video Creator Bundle': 24997,
      'Engagement Boost Add-On': 6997,
      'Flagship Everything Bundle': 44997
    };

    document.getElementById('purchaseForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const [agent, _] = document.getElementById('agentSelect').value.split('|');
      const name = document.getElementById('customerName').value;
      const email = document.getElementById('customerEmail').value;
      const notes = document.getElementById('specialNotes').value.trim();
      const data = {agent, name, email, notes};

      // Simple complex check: notes >200 chars or keywords like "custom", "special", etc.
      const isComplex = notes.length > 200 || /custom|special|modify|change/i.test(notes);

      if (isComplex) {
        // Send to backend for your review
        await fetch('YOUR_WEBAPP_URL/doPost', {
          method: 'POST',
          body: JSON.stringify({action: 'complexReview', data})
        });
        document.getElementById('statusMsg').innerHTML = '<p style="color:#f87171">Custom request received. We\'ll review and reply within 2-3 days.</p>';
      } else {
        // Standard - show PayPal
        const amount = prices[agent];
        const paypalForm = `
          <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
            <input type="hidden" name="cmd" value="_xclick">
            <input type="hidden" name="business" value="michaeltleatherwood@gmail.com">
            <input type="hidden" name="item_name" value="ScriptAndScale AI - ${agent}">
            <input type="hidden" name="amount" value="${amount}.00">
            <input type="hidden" name="currency_code" value="USD">
            <input type="hidden" name="return" value="${window.location.href}?paid=true">
            <input type="hidden" name="cancel_return" value="${window.location.href}">
            <input type="hidden" name="custom" value="${btoa(JSON.stringify(data))}">
            <button type="submit" style="background:#ffc439;color:#000;padding:1.5rem 3rem;border:none;border-radius:12px;font-size:1.5rem;font-weight:600;cursor:pointer">Pay $${amount.toLocaleString()} via PayPal â†’</button>
          </form>`;
        document.getElementById('paypalContainer').innerHTML = paypalForm;
        document.getElementById('paypalContainer').style.display = 'block';
        document.getElementById('statusMsg').innerHTML = '<p style="color:#4ade80">Standard request approved! Complete payment below.</p>';
        // Log standard to backend
        await fetch('YOUR_WEBAPP_URL/doPost', {method: 'POST', body: JSON.stringify({action: 'logPending', data})});
      }
    });

    // On load check for PayPal return
    if (window.location.search.includes('paid=true')) {
      document.getElementById('thankYouOverlay').style.display = 'flex';
      // Log sale from custom param
      const params = new URLSearchParams(window.location.search);
      if (params.get('custom')) {
        const data = JSON.parse(atob(params.get('custom')));
        fetch('YOUR_WEBAPP_URL/doPost', {method: 'POST', body: JSON.stringify({action: 'logSale', data})});
      }
      history.replaceState({}, '', window.location.pathname);
    }
  </script>

  <!-- Your footer - unchanged -->
</body>
</html>
